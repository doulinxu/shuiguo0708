<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>修改密码</title>
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<link rel="stylesheet" type="text/css" href="css/forgotPassword.css" />
	</head>

	<body>
		<div id="container">
			<i class="icon back"></i>
			<div class="main">
				<p class="title">
					修改密码
				</p>
				<div class="loginForm">
					<div class="password">
						<input id="oldPassword" type="text" placeholder="请输入旧密码" />
						<i class="error"></i>
					</div>
					<div class="password">
						<input id="newPassword" type="text" placeholder="请输入新密码" />
						<i class="error"></i>
					</div>
					<div class="passwordAgain">
						<input id="passwordAgain" type="text" placeholder="请再次输入新密码" />
						<i class="error"></i>
					</div>
					<div class="loginBtn disabled">
						确定修改
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script type="text/javascript">
		function changePassword(_this) {
			var oldPassword = $('#oldPassword').val();
			var newPassword = $('#newPassword').val();
			var passwordAgain = $('#passwordAgain').val();
			_this.parent().removeClass('error');
			if (oldPassword && newPassword && passwordAgain) {
				if ($('.loginBtn').hasClass('disabled')) {
					$('.loginBtn').removeClass('disabled');
				}
			} else {
				if (!$('.loginBtn').hasClass('disabled')) {
					$('.loginBtn').addClass('disabled');
				}
			}
		};
		$('#oldPassword').on('input', function() {
			changePassword($(this));
		});
		$('#newPassword').on('input', function() {
			changePassword($(this));
		});
		$('#passwordAgain').on('input', function() {
			changePassword($(this));
		});
		$('.loginBtn').on('click', function() {
			if ($(this).hasClass('disabled')) {
				return;
			}
			var oldPassword = $('#oldPassword').val();
			var newPassword = $('#newPassword').val();
			var passwordAgain = $('#passwordAgain').val();
			if(newPassword !== passwordAgain){
				alert('两次输入的密码不一致');
				$('#passwordAgain').parent().addClass('error');
				return;
			}
			alert('信息完备，可以发送请求');
			// ajax请求
// 			$.ajax({
// 				type: "GET",
// 				url: "",
// 				dataType: "json",
// 				success: function(data) {
// 					if (data.success) {
// 
// 					} else {
// 
// 					}
// 				},
// 				error: function(jqXHR) {
// 					aler("发生错误：" + jqXHR.status);
// 				}
// 			});
		});
	</script>
</html>
